{#
# Copyright 2015 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#}

{# [START form] #}
{% extends "base.html" %}

{% block content %}
<div class="container">
<div class="row">
<h3 class="col">Plan Recommendation</h3>
</div>
<div class="row">
<p class="col">We are looking for the best plan combination that covers you{% if family.marital_status == 'married' %}, your spouse {% endif %} {% if family.children|int > 0 %} and your children {% endif %}</p>
</div>
<br>
<div class="row">
	<div class="col-6"><h4>What is your expected utilization?</h4></div>
	<div class="col-6">
		<label class="custom-control custom-radio">
		  <input id="radio_low" name="radio" type="radio" class="custom-control-input utilization_radio"/>
		  <span class="custom-control-indicator"></span>
		  <span class="custom-control-description">Low</span>
		</label>
		<label class="custom-control custom-radio">
		  <input id="radio_med" name="radio" type="radio" class="custom-control-input utilization_radio">
		  <span class="custom-control-indicator"></span>
		  <span class="custom-control-description">Medium</span>
		</label>
		<label class="custom-control custom-radio">
		  <input id="radio_high" name="radio" type="radio" class="custom-control-input utilization_radio">
		  <span class="custom-control-indicator"></span>
		  <span class="custom-control-description">High</span>
		</label>
	</div>
</div>
<div class="row options-row hidden-xl-down">
<h4 class="col">Top options</h4>
</div>
{% for util in ['low', 'med', 'high'] %}
<div class="row options options-{{util}} hidden-xl-down">
<div class="col">
<table class="table table-hover options-table">
  <thead>
    <tr>
      <th>Option</th>
      <th>Price</th>
      <th>Expected Cost</th>
    </tr>
  </thead>
  <tbody>
  {% for option in options[util] %}
    <tr {% if option['recommended'] %}class="table-success" {% endif %}>
      <td>{{option.text}}</td>
      <td>{{option.price}}</td>
      <td>{{option.cost}}</td>
    </tr>
{% endfor %}    
  </tbody>
</table>
</div>
</div>
{% endfor %}
<div class="row rec-row hidden-xl-down">
<h4 class="col">Our Recommendation</h4>
</div>
{% for util in ['low', 'med', 'high'] %}
<div class="row recommendation-text recommendation-text-{{util}} hidden-xl-down">
<div class="col">{{recommendation[util].text}}</div>
</div>
{% endfor %}
</div>
<script type="text/javascript">

  $(document).ready(function() {

    $('.options-table').DataTable({
    	searching: false,
    	paging: false,
    	info: false,
    	"order": [[ 2, 'asc' ]]});

  	$(".utilization_radio").click(function(){
  		update_utilization(this);
  	});

  });
  
  function update_utilization(radio_element) {
	$(".rec-row").removeClass('hidden-xl-down')
	$(".options-row").removeClass('hidden-xl-down')
	$(".recommendation-text").addClass('hidden-xl-down')
	$(".options").addClass('hidden-xl-down')
  	utilization = radio_element.id;
  	if (utilization == 'radio_low') {
  		$(".recommendation-text-low").removeClass('hidden-xl-down')
  		$(".options-low").removeClass('hidden-xl-down')
  	}
  	else if (utilization == 'radio_med') {
  		$(".recommendation-text-med").removeClass('hidden-xl-down')
  		$(".options-med").removeClass('hidden-xl-down')
  	}
  	else if (utilization == 'radio_high') {
  		$(".recommendation-text-high").removeClass('hidden-xl-down')
  		$(".options-high").removeClass('hidden-xl-down')
  	}

  }

</script>
</div>
{% endblock %}
{# [END form] #}